language: python
dist: xenial

python:
- '3.6'
- '3.7'
- '3.8'

env:
- DJANGO_VERSION=2.0.*
- DJANGO_VERSION=2.1.*
- DJANGO_VERSION=2.2.*
- DJANGO_VERSION=3.0.*

script:
- pip install codecov
- pip install -q django==$DJANGO_VERSION
- pip install -e '.[test]'
- coverage run setup.py test
- coverage report -m --fail-under=85
- flake8
- isort --check-only

after_success:
- codecov

deploy:
  provider: pypi
  user: kingbuzzman
  password:
    secure: hQioa3nSzdDFG9uX6qJsj1Wo2lR2vFwfaKfB/HKvQtqzZ9X1xJEmiyXrHo8raiBkrigvkDa82htwA1l5PwaQkO8XrLnpBhM4/4iCDS6pxNFMMCuoq7EtPBFgB74u005wCBZlS9EIq8oMvuFqu/MKTCaZClBijc8WJKIePk7TlRsgcipLC6+nbxMoPYAj/p0yjDfc2TGN6SVzgaiwD1T0pEB5TnrpRiD4oGSE8hmtr6GTH1WgBecUsfvsjBqLIjAIfkQReveOsJx1dmH6VkE3abjNejo2C94h9IcU1SN1PY2djAGksrWamX/tdVxwf62osLr1P6dWUceILAlRe/DR1z9l6GV/ShJu/xVQN2ikL/q1V4ZeyurRoRiWA+vuEJDSOfnbTSUDNj08CW8uQIaT5K6Y3i9MEj0xt+P1gsl48mwqAkn65DsTYK3GviLtU8LSWt9XYlV8IZaQoZdUEYrOQH8EtBvp0R2F/lwpifzb6DepSGnHKydCjMft01GcgJhGxfPZHSakNScE4D+V2nYBGbbwNb5O/aVaaHaBsFv/jSOoMlOEN2KnqXg2Dj5X1aqm+TYVGrcOOouN97L2XatBrQ8c3G0DnQRsxXUFiUKKs6cSB8/WtjbVa2KZohZpSKObW87U7Jahjpo8KkbmeI2Egl+5v16+xsIpuZnOIu/umvs=
  on:
    branch: master
